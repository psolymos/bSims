<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>bSims simulation functions — bsims_init • bSims</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="bSims simulation functions — bsims_init"><meta name="description" content="Functions to initialize, populate, animate, detect, and transcribe
simulated birds in a point count."><meta property="og:description" content="Functions to initialize, populate, animate, detect, and transcribe
simulated birds in a point count."><script src="https://cdn.usefathom.com/script.js" data-site="KTMJHUPR" defer></script><link rel="icon" href="https://peter.solymos.org/favicon.ico"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bSims</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3-4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/bsims01-intro.html">Introduction to the bSims package</a></li>
    <li><a class="dropdown-item" href="../articles/bsims02-layers.html">Simulation layers in bSims</a></li>
    <li><a class="dropdown-item" href="../articles/bsims03-workflow.html">Simulation workflow in bSims</a></li>
    <li><a class="dropdown-item" href="../articles/bsims04-apps.html">Explore bSims with Shiny apps</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.linkedin.com/in/peter-solymos/" aria-label="Linkedin"><span class="fa fa-linkedin"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/psolymos" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/psolymos" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>bSims simulation functions</h1>

      <div class="d-none name"><code>bsims_init.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Functions to initialize, populate, animate, detect, and transcribe
simulated birds in a point count.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">bsims_init</span><span class="op">(</span>extent <span class="op">=</span> <span class="fl">10</span>, road <span class="op">=</span> <span class="fl">0</span>, edge <span class="op">=</span> <span class="fl">0</span>, offset <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bsims_populate</span><span class="op">(</span><span class="va">x</span>, density <span class="op">=</span> <span class="fl">1</span>, abund_fun <span class="op">=</span> <span class="cn">NULL</span>, xy_fun <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  margin <span class="op">=</span> <span class="fl">0</span>, maxit <span class="op">=</span> <span class="fl">100</span>, fail <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bsims_animate</span><span class="op">(</span><span class="va">x</span>, vocal_rate <span class="op">=</span> <span class="fl">1</span>, move_rate <span class="op">=</span> <span class="fl">0</span>, duration <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  movement <span class="op">=</span> <span class="fl">0</span>, mixture <span class="op">=</span> <span class="fl">1</span>, avoid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none"</span>, <span class="st">"R"</span>, <span class="st">"ER"</span><span class="op">)</span>,</span>
<span>  initial_location<span class="op">=</span><span class="cn">FALSE</span>, allow_overlap<span class="op">=</span><span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bsims_detect</span><span class="op">(</span><span class="va">x</span>, xy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, tau <span class="op">=</span> <span class="fl">1</span>, dist_fun <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  event_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"vocal"</span>, <span class="st">"move"</span>, <span class="st">"both"</span><span class="op">)</span>,</span>
<span>  sensitivity<span class="op">=</span><span class="fl">1</span>, direction<span class="op">=</span><span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bsims_transcribe</span><span class="op">(</span><span class="va">x</span>, tint <span class="op">=</span> <span class="cn">NULL</span>, rint <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  error <span class="op">=</span> <span class="fl">0</span>, bias <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  condition<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"event1"</span>, <span class="st">"det1"</span>, <span class="st">"alldet"</span><span class="op">)</span>,</span>
<span>  event_type<span class="op">=</span><span class="cn">NULL</span>, perception<span class="op">=</span><span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bsims_all</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'bsims_landscape'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S3 method for class 'bsims_population'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S3 method for class 'bsims_events'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S3 method for class 'bsims_detections'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S3 method for class 'bsims_transcript'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S3 method for class 'bsims_all'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-extent">extent<a class="anchor" aria-label="anchor" href="#arg-extent"></a></dt>
<dd><p>extent of simulation area, an extent x extent square with (0,0) at the center.</p></dd>

  <dt id="arg-road">road<a class="anchor" aria-label="anchor" href="#arg-road"></a></dt>
<dd><p>half width of the road stratum (perpendicular to the y axis).</p></dd>

  <dt id="arg-edge">edge<a class="anchor" aria-label="anchor" href="#arg-edge"></a></dt>
<dd><p>width of edge, same width on both sides of the road stratum.</p></dd>

  <dt id="arg-offset">offset<a class="anchor" aria-label="anchor" href="#arg-offset"></a></dt>
<dd><p>offset to apply to road and edge strata relative to the center in the x direction.</p></dd>

  <dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>a simulation object.</p></dd>

  <dt id="arg-density">density<a class="anchor" aria-label="anchor" href="#arg-density"></a></dt>
<dd><p>population density, D, recycled 3x for the 3 strata
(H: habitat, E: edge, R: road).</p></dd>

  <dt id="arg-abund-fun">abund_fun<a class="anchor" aria-label="anchor" href="#arg-abund-fun"></a></dt>
<dd><p>function to simulate abundance, N ~ Poisson(lambda), lambda=DA by default.</p></dd>

  <dt id="arg-xy-fun">xy_fun<a class="anchor" aria-label="anchor" href="#arg-xy-fun"></a></dt>
<dd><p>function used to simulate nest locations, see <code><a href="acceptreject.html">acceptreject</a></code>.
The function should return probability (value between 0 and 1),
<code>NULL</code> means complete spatial randomness.</p></dd>

  <dt id="arg-margin-maxit-fail">margin, maxit, fail<a class="anchor" aria-label="anchor" href="#arg-margin-maxit-fail"></a></dt>
<dd><p>arguments passed to <code><a href="acceptreject.html">acceptreject</a></code> when using <code>xy_fun</code>
to simulate nest locations.</p></dd>

  <dt id="arg-vocal-rate-move-rate">vocal_rate, move_rate<a class="anchor" aria-label="anchor" href="#arg-vocal-rate-move-rate"></a></dt>
<dd><p>Vocal and movement rates (see <code><a href="events.html">events</a></code>).
Both of these rates can be: a single number;
a vector of length <code>length(mixture)</code> (behavior based finite mixture groups);
a vector of length 3 with <code>mixture=1</code> (corresponding to HER strata);
or a matrix of dimension 3 x <code>length(mixture)</code>
(HER strata x number of behavior based groups).</p></dd>

  <dt id="arg-duration">duration<a class="anchor" aria-label="anchor" href="#arg-duration"></a></dt>
<dd><p>total time duration to consider (in minutes), passed to <code><a href="events.html">events</a></code>.</p></dd>

  <dt id="arg-movement">movement<a class="anchor" aria-label="anchor" href="#arg-movement"></a></dt>
<dd><p>standard deviation for a bivariate Normal kernel to simulate
locations centered at the nest location, passed to <code><a href="events.html">events</a></code>.
Can refer to the same stratum and behavior based groups as <code>move_rate</code>.</p></dd>

  <dt id="arg-mixture">mixture<a class="anchor" aria-label="anchor" href="#arg-mixture"></a></dt>
<dd><p>behavior based finite mixture group proportions.</p></dd>

  <dt id="arg-avoid">avoid<a class="anchor" aria-label="anchor" href="#arg-avoid"></a></dt>
<dd><p>range along the x axis to avoid with respect to movement locations,
passed to <code><a href="events.html">events</a></code>.</p></dd>

  <dt id="arg-initial-location">initial_location<a class="anchor" aria-label="anchor" href="#arg-initial-location"></a></dt>
<dd><p>logical, <code>move_rate</code> and <code>vocal_rate</code> are
silently ignored if <code>TRUE</code>
and nest locations are provided as part of the events table.
This renders all individuals equally available for detection.</p></dd>

  <dt id="arg-allow-overlap">allow_overlap<a class="anchor" aria-label="anchor" href="#arg-allow-overlap"></a></dt>
<dd><p>logical, allowing overlap between neighboring nests when movement is involved.
If <code>FALSE</code>, Voronoi tessellation is used to prevent overlap.
If <code>TRUE</code>, the unconstrained bivariate Normal kernel is used.</p></dd>

  <dt id="arg-xy">xy<a class="anchor" aria-label="anchor" href="#arg-xy"></a></dt>
<dd><p>a vector of x and y coordinates describing the position of the observer.</p></dd>

  <dt id="arg-tau">tau<a class="anchor" aria-label="anchor" href="#arg-tau"></a></dt>
<dd><p>parameter of the distance function.
Can be a single numeric value;
a vector of length 2 to provide parameters for
vocalization (1st value) and movement (2nd value) related events;
(H: habitat, E: edge, R: road, in this order);
a vector of length 3 to provide parameters for the 3 strata
(H: habitat, E: edge, R: road);
or a 3 x 2 matrix combining strata (rows) and
vocalization/movement (columns) related parameters.
Segmented sound attenuation is used when the values are different
in the 3 strata (see <code><a href="dist_fun2.html">dist_fun2</a></code>).</p></dd>

  <dt id="arg-dist-fun">dist_fun<a class="anchor" aria-label="anchor" href="#arg-dist-fun"></a></dt>
<dd><p>distance function (1st argument is distance, second is <code>tau</code>).</p></dd>

  <dt id="arg-event-type">event_type<a class="anchor" aria-label="anchor" href="#arg-event-type"></a></dt>
<dd><p>type of events to access (vocal, movement, or both).
Inherits value from input object when <code>NULL</code>.</p></dd>

  <dt id="arg-tint">tint<a class="anchor" aria-label="anchor" href="#arg-tint"></a></dt>
<dd><p>time interval break points in minutes.</p></dd>

  <dt id="arg-rint">rint<a class="anchor" aria-label="anchor" href="#arg-rint"></a></dt>
<dd><p>distance interval break points in units of 100 meter.</p></dd>

  <dt id="arg-condition">condition<a class="anchor" aria-label="anchor" href="#arg-condition"></a></dt>
<dd><p>conditioning type to define availability for each individual:
<code>"event1"</code>: the 1st event (detected or not);
<code>"det1"</code>: the 1st detection;
<code>"alldet"</code>: all detections (counting the same individual multiple times).</p></dd>

  <dt id="arg-error">error<a class="anchor" aria-label="anchor" href="#arg-error"></a></dt>
<dd><p>log scale standard deviation (SD) for distance estimation error,
see <code><a href="rlnorm2.html">rlnorm2</a></code>.
When <code>direction=TRUE</code>, error changes based on the angle between the observer and the individual's (random) singing direction. When the bird faces the observer (0 degrees) SD is 0, when the bird is facing away (180 degrees) SD is <code>error</code>. In the range between 0-180 degrees the SD is changing according to the cosine of the degree: SD*(0.5-cos(degree*pi/180)/2).</p></dd>

  <dt id="arg-bias">bias<a class="anchor" aria-label="anchor" href="#arg-bias"></a></dt>
<dd><p>nonnegative numeric, the distance estimation bias. The default value (1) means no bias, &lt;1 indicates negative bias (perceived distance is less than true distance), &gt;1 indicates positive bias (perceived distance is higher than true distance). This acts as a multiplier and can be combined with <code>error</code>.
When <code>direction=TRUE</code>, bias changes based on the angle between the observer and the individual's (random) singing direction. When the bird faces the observer (0 degrees) perceived distance equals the true distance, when the bird is facing away (180 degrees) perceived distance is <code>bias</code> * true distance. In the range between 0-180 degrees the bias is changing according to the cosine of the degree: 1+(bias-1)*(0.5-cos(degree*pi/180)/2).</p></dd>

  <dt id="arg-perception">perception<a class="anchor" aria-label="anchor" href="#arg-perception"></a></dt>
<dd><p>perceived number of individuals relative to the actual number of individuals.
A non-negative number (&lt;1 values lead to under counting,
&gt;1 values lead to over counting),
or <code>NULL</code> (observer correctly identifies all individuals).</p></dd>

  <dt id="arg-sensitivity">sensitivity<a class="anchor" aria-label="anchor" href="#arg-sensitivity"></a></dt>
<dd><p>non-negative numeric value indicating the sensitivity of the sensor
receiving the signal. Can be of length 1 (applies to both vocal and movement events)
or a named vector of length 2 (names should indicate which one
is <code>"vocal"</code> or <code>"move"</code>). Sensitivity of 1 means that
the process captured by <code>tau</code> is unaffected.
Less than 1 values indicate lower sensitivity (effectively decreasing tau),
larger than 1 values indicate higher sensitivity (effectively increasing tau).</p></dd>

  <dt id="arg-direction">direction<a class="anchor" aria-label="anchor" href="#arg-direction"></a></dt>
<dd><p>logical. When <code>TRUE</code>, tau for vocalizations (not for movement) changes based on the angle between the observer and the individual's (random) singing direction. When the bird faces the observer (0 degrees) tau is unaffected, when the bird is facing away (180 degrees) tau is <code>sensitivity * tau</code>. In the range between 0-180 degrees the effect is changing according to the cosine of the degree (0.5-cos(degree*pi/180)/2).</p></dd>

  <dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>other arguments passed to underlying functions.
For the <code>bsims_all</code> wrapper, it means all
the arguments (except for <code>x</code>) that the underlying
<code>bsims_*</code> functions have. <code>bsims_all</code> can also take a single
list as its argument.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The functions capturing the simulation layers
are supposed to be called in sequence,
allowing to simulate multiple realities by keeping
preceding layers intact. Construction allows easy piping.
The <code>bsims_all</code> function is a wrapper for the <code>bsims_*</code>
layer functions.</p>
<p>The simulations follow time-removal and distance sampling models based on
Matsuoka et al. (2012) &lt;doi:10.1525/auk.2012.11190&gt;,
Solymos et al. (2013) &lt;doi:10.1111/2041-210X.12106&gt;,
and Solymos et al. (2018) &lt;doi:10.1650/CONDOR-18-32.1&gt;,
and sound attenuation experiments by
Yip et al. (2017) &lt;doi:10.1650/CONDOR-16-93.1&gt;.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>bsims_init</code> returns a landscape object.</p>
<p><code>bsims_populate</code> returns a population object.</p>
<p><code>bsims_animate</code> returns an events object.</p>
<p><code>bsims_detect</code> returns a detections object.</p>
<p><code>bsims_transcribe</code> returns a transcript object.</p>
<p><code>get_table</code> returns the removal table.</p>
<p><code>bsims_all</code> returns a closure with
<code>$settings()</code>, <code>$new(recover = FALSE)</code>,
and <code>$replicate(B, recover = FALSE, cl = NULL)</code>
functions. The settings function returns the input arguments as a list;
the new function returns a single transcript object;
the replicate function takes an argument for the
number of replicates (<code>B</code>) and returns a list of transcript objects
with B elements.
The <code>cl</code> argument is used to parallelize the work,
can be a numeric value on Unix/Linux/OSX, or a cluster object on any OS,
see examples.
The `recover = TRUE` argument allows to run simulations with error
catching based on <code><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></code>.</p>
<p>Note that simulated objects returned by <code>bsims_all</code>
will contain different realizations and all the conditionally
independent layers. Use a layered approach if former layers are meant
to be kept identical across runs.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Matsuoka, S. M., Bayne, E. M., Solymos, P., Fontaine, P.,
Cumming, S. G., Schmiegelow, F. K. A., &amp; Song, S. A., 2012.
Using binomial distance-sampling models to estimate the
effective detection radius of point-counts surveys across boreal Canada.
<em>Auk</em>, <strong>129</strong>: 268–282.
&lt;doi:10.1525/auk.2012.11190&gt;</p>
<p>Solymos, P., Matsuoka, S. M., Bayne, E. M., Lele, S. R., Fontaine, P.,
Cumming, S. G., Stralberg, D., Schmiegelow, F. K. A. &amp; Song, S. J., 2013.
Calibrating indices of avian density from non-standardized survey data:
making the most of a messy situation.
<em>Methods in Ecology and Evolution</em>, <b>4</b>: 1047–1058.
&lt;doi:10.1111/2041-210X.12106&gt;</p>
<p>Solymos, P., Matsuoka, S. M., Cumming, S. G., Stralberg, D., Fontaine, P.,
Schmiegelow, F. K. A., Song, S. J., and Bayne, E. M., 2018.
Evaluating time-removal models for estimating availability of boreal birds
during point-count surveys: sample size requirements and model complexity.
<em>Condor</em>, <b>120</b>: 765–786.
&lt;doi:10.1650/CONDOR-18-32.1&gt;</p>
<p>Yip, D. A., Bayne, E. M., Solymos, P., Campbell, J.,
and Proppe, J. D., 2017.
Sound attenuation in forested and roadside environments:
implications for avian point count surveys.
<em>Condor</em>, <b>119</b>: 73–84.
&lt;doi:10.1650/CONDOR-16-93.1&gt;</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Peter Solymos</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Plotting functions:
<code><a href="plot.html">plot.bsims_landscape</a></code></p>
<p>Getter functions:
<code><a href="getters.html">get_nests</a></code>,
<code><a href="getters.html">get_events</a></code>,
<code><a href="getters.html">get_detections</a></code>,
<code><a href="getters.html">get_abundance</a></code>,
<code><a href="getters.html">get_density</a></code>
<code><a href="getters.html">get_table</a></code></p>
<p>Shiny apps:
<code><a href="run_app.html">run_app</a></code></p>
<p><code><a href="acceptreject.html">acceptreject</a></code>,
<code><a href="events.html">events</a></code>,
<code><a href="estimate.html">estimate</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">phi</span> <span class="op">&lt;-</span> <span class="fl">0.5</span></span></span>
<span class="r-in"><span><span class="va">tau</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span></span>
<span class="r-in"><span><span class="va">dur</span> <span class="op">&lt;-</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="va">rbr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">1.5</span>, <span class="cn">Inf</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu">bsims_init</span><span class="op">(</span><span class="fl">10</span>, <span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bSims landscape</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 km x 1 km</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   stratification: HER</span>
<span class="r-in"><span><span class="op">(</span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">bsims_populate</span><span class="op">(</span><span class="va">l</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bSims population</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 km x 1 km</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   stratification: HER</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   total abundance: 101</span>
<span class="r-in"><span><span class="op">(</span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">bsims_animate</span><span class="op">(</span><span class="va">p</span>, vocal_rate<span class="op">=</span><span class="va">phi</span>, duration<span class="op">=</span><span class="va">dur</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bSims events</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 km x 1 km</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   stratification: HER</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   total abundance: 101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   duration: 10 min</span>
<span class="r-in"><span><span class="op">(</span><span class="va">o</span> <span class="op">&lt;-</span> <span class="fu">bsims_detect</span><span class="op">(</span><span class="va">a</span>, tau<span class="op">=</span><span class="va">tau</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bSims detections</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 km x 1 km</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   stratification: HER</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   total abundance: 101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   duration: 10 min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   detected: 27 heard</span>
<span class="r-in"><span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">bsims_transcribe</span><span class="op">(</span><span class="va">o</span>, tint<span class="op">=</span><span class="va">tbr</span>, rint<span class="op">=</span><span class="va">rbr</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bSims transcript</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 km x 1 km</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   stratification: HER</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   total abundance: 101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   duration: 10 min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   detected: 27 heard</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1st event detected by breaks:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     [0, 3, 5, 10 min]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     [0, 50, 100, 150, Inf m]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="bsims_init-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="getters.html">get_table</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"removal"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          0-3min 3-5min 5-10min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0-50m         0      0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50-100m       0      1       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100-150m      2      1       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 150+m        10      2       1</span>
<span class="r-in"><span><span class="fu"><a href="getters.html">get_table</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"visits"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          0-3min 3-5min 5-10min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0-50m         0      0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50-100m       0      1       1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100-150m      2      4       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 150+m        10      4      12</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="getters.html">get_events</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            x          y           t v   a  i</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  4.9420166  0.8481676 0.001074585 1 205 71</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2.2904309  3.0533086 0.007809853 1 266 86</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -4.7614717  3.7423802 0.007952425 1 266 18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  2.5182284  3.3121810 0.018549427 1 219 90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 -0.3207192 -1.9902766 0.061760181 1  69 49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  3.2394219  2.5997256 0.063696320 1 204 81</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="getters.html">get_events</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="bsims_init-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="getters.html">get_detections</a></span><span class="op">(</span><span class="va">o</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              x         y          t v   a        d  f  i  j</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  -0.32071924 -1.990277 0.06176018 1  69 2.015952 NA 49 49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 -1.20470664 -2.317693 0.15694491 1 267 2.612091 NA 38 38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 -1.20470664 -2.317693 0.29705728 1 325 2.612091 NA 38 38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23  0.80483427 -1.422090 0.35924502 1 344 1.634043 NA 55 55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38 -0.54546234  4.718541 0.75802088 1  17 4.749964 NA 40 40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 48  0.02920578 -1.223315 1.04568047 1  44 1.223664 NA 51 51</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="getters.html">get_detections</a></span><span class="op">(</span><span class="va">o</span><span class="op">)</span>, <span class="st">"time"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="bsims_init-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="getters.html">get_detections</a></span><span class="op">(</span><span class="va">o</span><span class="op">)</span>, <span class="st">"distance"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="bsims_init-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## wrapper function for all the bsims_* layers</span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">bsims_all</span><span class="op">(</span>road<span class="op">=</span><span class="fl">1</span>, density<span class="op">=</span><span class="fl">0.5</span>, tint<span class="op">=</span><span class="va">tbr</span>, rint<span class="op">=</span><span class="va">rbr</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## alternatively: supply a list</span></span></span>
<span class="r-in"><span><span class="co">#settings &lt;- list(road=1, density=0.5, tint=tbr, rint=rbr)</span></span></span>
<span class="r-in"><span><span class="co">#b &lt;- bsims_all(settings)</span></span></span>
<span class="r-in"><span><span class="va">b</span><span class="op">$</span><span class="fu">settings</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $road</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $density</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $tint</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  3  5 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rint</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5 1.0 1.5 Inf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">b</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bSims transcript</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 km x 1 km</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   stratification: HR</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   total abundance: 49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   duration: 10 min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   detected: 3 heard</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1st event detected by breaks:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     [0, 3, 5, 10 min]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     [0, 50, 100, 150, Inf m]</span>
<span class="r-in"><span><span class="va">bb</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">$</span><span class="fu">replicate</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">bb</span>, <span class="va">get_table</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          0-3min 3-5min 5-10min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0-50m         0      0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50-100m       0      0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100-150m      0      0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 150+m         0      0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          0-3min 3-5min 5-10min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0-50m         2      0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50-100m       0      0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100-150m      1      0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 150+m         0      0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          0-3min 3-5min 5-10min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0-50m         0      0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50-100m       0      0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100-150m      3      0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 150+m         0      0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co">## parallel simulations</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">parallel</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">bsims_all</span><span class="op">(</span>density<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">B</span> <span class="op">&lt;-</span> <span class="fl">4</span>  <span class="co"># number of runs</span></span></span>
<span class="r-in"><span><span class="va">nc</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="co"># number of cores</span></span></span>
<span class="r-in"><span><span class="co">## sequential</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">bb</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">$</span><span class="fu">replicate</span><span class="op">(</span><span class="va">B</span>, cl<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    user  system elapsed </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0.398   0.004   0.402 </span>
<span class="r-in"><span><span class="co">## parallel clusters</span></span></span>
<span class="r-in"><span><span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">makeCluster</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## note: loading the package is optional</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/parallel/clusterApply.html" class="external-link">clusterEvalQ</a></span><span class="op">(</span><span class="va">cl</span>, <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/psolymos/bSims" class="external-link">bSims</a></span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in checkForRemoteErrors(lapply(cl, recvResult)):</span> 2 nodes produced errors; first error: there is no package called ‘bSims’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Timing stopped at: 0.001 0 0.002</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">bb</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">$</span><span class="fu">replicate</span><span class="op">(</span><span class="va">B</span>, cl<span class="op">=</span><span class="va">cl</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in checkForRemoteErrors(lapply(cl, recvResult)):</span> 2 nodes produced errors; first error: there is no package called ‘bSims’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Timing stopped at: 0.001 0 0.002</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">stopCluster</a></span><span class="op">(</span><span class="va">cl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## parallel forking</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="va">.Platform</span><span class="op">$</span><span class="va">OS.type</span> <span class="op">!=</span> <span class="st">"windows"</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">bb</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">$</span><span class="fu">replicate</span><span class="op">(</span><span class="va">B</span>, cl<span class="op">=</span><span class="va">nc</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    user  system elapsed </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0.162   0.068   0.243 </span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Peter Solymos.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

